import{d as e,c as t,V as a,q as s,a as l,k as o,n as r,u as n,f as i,g as u,j as c,t as d,i as p,b as f,w as v,h as y,a4 as m,a5 as g,r as h,F as b,P as k,a6 as w,l as $,m as x,a7 as F,E,Y as R,a8 as S,B as T,H as L,G as _,N as C,a3 as P,D as U}from"./index.Dtsxs5-j.js";import{b as j,d as B,j as D,A as O,B as N,D as q,F as H,G as A,E as I,_ as M,m as K,v as W,y as z,H as X,I as V,J as G,K as J,L as Y}from"./el-button.Bf-OVv06.js";import{t as Q,d as Z}from"./index.DhER-06O.js";import{m as ee,c as te}from"./message.ohA7tZs1.js";import{b as ae}from"./_baseClone.Cjz58nAh.js";import{i as se}from"./isEqual.DXE01s-J.js";function le(e){return ae(e,5)}const oe=j({type:{type:String,default:"line",values:["line","circle","dashboard"]},percentage:{type:Number,default:0,validator:e=>e>=0&&e<=100},status:{type:String,default:"",values:["","success","exception","warning"]},indeterminate:{type:Boolean,default:!1},duration:{type:Number,default:3},strokeWidth:{type:Number,default:6},strokeLinecap:{type:B(String),default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:B([String,Array,Function]),default:""},striped:Boolean,stripedFlow:Boolean,format:{type:B(Function),default:e=>`${e}%`}}),re=["aria-valuenow"],ne={viewBox:"0 0 100 100"},ie=["d","stroke","stroke-linecap","stroke-width"],ue=["d","stroke","opacity","stroke-linecap","stroke-width"],ce={key:0},de=e({name:"ElProgress"});const pe=K(M(e({...de,props:oe,setup(e){const m=e,g={success:"#13ce66",exception:"#ff4949",warning:"#e6a23c",default:"#20a0ff"},h=D("progress"),b=t((()=>{const e={width:`${m.percentage}%`,animationDuration:`${m.duration}s`},t=P(m.percentage);return t.includes("gradient")?e.background=t:e.backgroundColor=t,e})),k=t((()=>(m.strokeWidth/m.width*100).toFixed(1))),w=t((()=>["circle","dashboard"].includes(m.type)?Number.parseInt(""+(50-Number.parseFloat(k.value)/2),10):0)),$=t((()=>{const e=w.value,t="dashboard"===m.type;return`\n          M 50 50\n          m 0 ${t?"":"-"}${e}\n          a ${e} ${e} 0 1 1 0 ${t?"-":""}${2*e}\n          a ${e} ${e} 0 1 1 0 ${t?"":"-"}${2*e}\n          `})),x=t((()=>2*Math.PI*w.value)),F=t((()=>"dashboard"===m.type?.75:1)),E=t((()=>`${-1*x.value*(1-F.value)/2}px`)),R=t((()=>({strokeDasharray:`${x.value*F.value}px, ${x.value}px`,strokeDashoffset:E.value}))),S=t((()=>({strokeDasharray:`${x.value*F.value*(m.percentage/100)}px, ${x.value}px`,strokeDashoffset:E.value,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease, opacity ease 0.6s"}))),T=t((()=>{let e;return e=m.color?P(m.percentage):g[m.status]||g.default,e})),L=t((()=>"warning"===m.status?O:"line"===m.type?"success"===m.status?N:q:"success"===m.status?H:A)),_=t((()=>"line"===m.type?12+.4*m.strokeWidth:.111111*m.width+2)),C=t((()=>m.format(m.percentage)));const P=e=>{var t;const{color:l}=m;if(a(l))return l(e);if(s(l))return l;{const a=function(e){const t=100/e.length;return e.map(((e,a)=>s(e)?{color:e,percentage:(a+1)*t}:e)).sort(((e,t)=>e.percentage-t.percentage))}(l);for(const t of a)if(t.percentage>e)return t.color;return null==(t=a[a.length-1])?void 0:t.color}};return(e,t)=>(l(),o("div",{class:r([n(h).b(),n(h).m(e.type),n(h).is(e.status),{[n(h).m("without-text")]:!e.showText,[n(h).m("text-inside")]:e.textInside}]),role:"progressbar","aria-valuenow":e.percentage,"aria-valuemin":"0","aria-valuemax":"100"},["line"===e.type?(l(),o("div",{key:0,class:r(n(h).b("bar"))},[i("div",{class:r(n(h).be("bar","outer")),style:u({height:`${e.strokeWidth}px`})},[i("div",{class:r([n(h).be("bar","inner"),{[n(h).bem("bar","inner","indeterminate")]:e.indeterminate},{[n(h).bem("bar","inner","striped")]:e.striped},{[n(h).bem("bar","inner","striped-flow")]:e.stripedFlow}]),style:u(n(b))},[(e.showText||e.$slots.default)&&e.textInside?(l(),o("div",{key:0,class:r(n(h).be("bar","innerText"))},[c(e.$slots,"default",{percentage:e.percentage},(()=>[i("span",null,d(n(C)),1)]))],2)):p("v-if",!0)],6)],6)],2)):(l(),o("div",{key:1,class:r(n(h).b("circle")),style:u({height:`${e.width}px`,width:`${e.width}px`})},[(l(),o("svg",ne,[i("path",{class:r(n(h).be("circle","track")),d:n($),stroke:`var(${n(h).cssVarName("fill-color-light")}, #e5e9f2)`,"stroke-linecap":e.strokeLinecap,"stroke-width":n(k),fill:"none",style:u(n(R))},null,14,ie),i("path",{class:r(n(h).be("circle","path")),d:n($),stroke:n(T),fill:"none",opacity:e.percentage?1:0,"stroke-linecap":e.strokeLinecap,"stroke-width":n(k),style:u(n(S))},null,14,ue)]))],6)),!e.showText&&!e.$slots.default||e.textInside?p("v-if",!0):(l(),o("div",{key:2,class:r(n(h).e("text")),style:u({fontSize:`${n(_)}px`})},[c(e.$slots,"default",{percentage:e.percentage},(()=>[e.status?(l(),f(n(I),{key:1},{default:v((()=>[(l(),f(y(n(L))))])),_:1})):(l(),o("span",ce,d(n(C)),1))]))],6))],10,re))}}),[["__file","progress.vue"]])),fe=Symbol("uploadContextKey");class ve extends Error{constructor(e,t,a,s){super(e),this.name="UploadAjaxError",this.status=t,this.method=a,this.url=s}}function ye(e,t,a){let s;return s=a.response?`${a.response.error||a.response}`:a.responseText?`${a.responseText}`:`fail to ${t.method} ${e} ${a.status}`,new ve(s,a.status,t.method,e)}const me=["text","picture","picture-card"];let ge=1;const he=()=>Date.now()+ge++,be=j({action:{type:String,default:"#"},headers:{type:B(Object)},method:{type:String,default:"post"},data:{type:B([Object,Function,Promise]),default:()=>ee({})},multiple:{type:Boolean,default:!1},name:{type:String,default:"file"},drag:{type:Boolean,default:!1},withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:{type:String,default:""},fileList:{type:B(Array),default:()=>ee([])},autoUpload:{type:Boolean,default:!0},listType:{type:String,values:me,default:"text"},httpRequest:{type:B(Function),default:e=>{"undefined"==typeof XMLHttpRequest&&Q("ElUpload","XMLHttpRequest is undefined");const t=new XMLHttpRequest,a=e.action;t.upload&&t.upload.addEventListener("progress",(t=>{const a=t;a.percent=t.total>0?t.loaded/t.total*100:0,e.onProgress(a)}));const s=new FormData;if(e.data)for(const[o,r]of Object.entries(e.data))m(r)&&r.length?s.append(o,...r):s.append(o,r);s.append(e.filename,e.file,e.file.name),t.addEventListener("error",(()=>{e.onError(ye(a,e,t))})),t.addEventListener("load",(()=>{if(t.status<200||t.status>=300)return e.onError(ye(a,e,t));e.onSuccess(function(e){const t=e.responseText||e.response;if(!t)return t;try{return JSON.parse(t)}catch(a){return t}}(t))})),t.open(e.method,a,!0),e.withCredentials&&"withCredentials"in t&&(t.withCredentials=!0);const l=e.headers||{};if(l instanceof Headers)l.forEach(((e,a)=>t.setRequestHeader(a,e)));else for(const[o,r]of Object.entries(l))W(r)||t.setRequestHeader(o,String(r));return t.send(s),t}},disabled:Boolean,limit:Number}),ke=j({...be,beforeUpload:{type:B(Function),default:g},beforeRemove:{type:B(Function)},onRemove:{type:B(Function),default:g},onChange:{type:B(Function),default:g},onPreview:{type:B(Function),default:g},onSuccess:{type:B(Function),default:g},onProgress:{type:B(Function),default:g},onError:{type:B(Function),default:g},onExceed:{type:B(Function),default:g},crossorigin:{type:B(String)}}),we=j({files:{type:B(Array),default:()=>ee([])},disabled:{type:Boolean,default:!1},handlePreview:{type:B(Function),default:g},listType:{type:String,values:me,default:"text"},crossorigin:{type:B(String)}}),$e=["onKeydown"],xe=["src","crossorigin"],Fe=["onClick"],Ee=["title"],Re=["onClick"],Se=["onClick"],Te=e({name:"ElUploadList"});var Le=M(e({...Te,props:we,emits:{remove:e=>!!e},setup(e,{emit:a}){const s=e,{t:y}=z(),m=D("upload"),g=D("icon"),E=D("list"),R=X(),S=h(!1),T=t((()=>[m.b("list"),m.bm("list",s.listType),m.is("disabled",s.disabled)])),L=e=>{a("remove",e)};return(e,t)=>(l(),f(F,{tag:"ul",class:r(n(T)),name:n(E).b()},{default:v((()=>[(l(!0),o(b,null,k(e.files,(a=>(l(),o("li",{key:a.uid||a.name,class:r([n(m).be("list","item"),n(m).is(a.status),{focusing:S.value}]),tabindex:"0",onKeydown:w((e=>!n(R)&&L(a)),["delete"]),onFocus:t[0]||(t[0]=e=>S.value=!0),onBlur:t[1]||(t[1]=e=>S.value=!1),onClick:t[2]||(t[2]=e=>S.value=!1)},[c(e.$slots,"default",{file:a},(()=>["picture"===e.listType||"uploading"!==a.status&&"picture-card"===e.listType?(l(),o("img",{key:0,class:r(n(m).be("list","item-thumbnail")),src:a.url,crossorigin:e.crossorigin,alt:""},null,10,xe)):p("v-if",!0),"uploading"===a.status||"picture-card"!==e.listType?(l(),o("div",{key:1,class:r(n(m).be("list","item-info"))},[i("a",{class:r(n(m).be("list","item-name")),onClick:$((t=>e.handlePreview(a)),["prevent"])},[x(n(I),{class:r(n(g).m("document"))},{default:v((()=>[x(n(V))])),_:1},8,["class"]),i("span",{class:r(n(m).be("list","item-file-name")),title:a.name},d(a.name),11,Ee)],10,Fe),"uploading"===a.status?(l(),f(n(pe),{key:0,type:"picture-card"===e.listType?"circle":"line","stroke-width":"picture-card"===e.listType?6:2,percentage:Number(a.percentage),style:u("picture-card"===e.listType?"":"margin-top: 0.5rem")},null,8,["type","stroke-width","percentage","style"])):p("v-if",!0)],2)):p("v-if",!0),i("label",{class:r(n(m).be("list","item-status-label"))},["text"===e.listType?(l(),f(n(I),{key:0,class:r([n(g).m("upload-success"),n(g).m("circle-check")])},{default:v((()=>[x(n(N))])),_:1},8,["class"])):["picture-card","picture"].includes(e.listType)?(l(),f(n(I),{key:1,class:r([n(g).m("upload-success"),n(g).m("check")])},{default:v((()=>[x(n(H))])),_:1},8,["class"])):p("v-if",!0)],2),n(R)?p("v-if",!0):(l(),f(n(I),{key:2,class:r(n(g).m("close")),onClick:e=>L(a)},{default:v((()=>[x(n(A))])),_:2},1032,["class","onClick"])),p(" Due to close btn only appears when li gets focused disappears after li gets blurred, thus keyboard navigation can never reach close btn"),p(" This is a bug which needs to be fixed "),p(" TODO: Fix the incorrect navigation interaction "),n(R)?p("v-if",!0):(l(),o("i",{key:3,class:r(n(g).m("close-tip"))},d(n(y)("el.upload.deleteTip")),3)),"picture-card"===e.listType?(l(),o("span",{key:4,class:r(n(m).be("list","item-actions"))},[i("span",{class:r(n(m).be("list","item-preview")),onClick:t=>e.handlePreview(a)},[x(n(I),{class:r(n(g).m("zoom-in"))},{default:v((()=>[x(n(G))])),_:1},8,["class"])],10,Re),n(R)?p("v-if",!0):(l(),o("span",{key:0,class:r(n(m).be("list","item-delete")),onClick:e=>L(a)},[x(n(I),{class:r(n(g).m("delete"))},{default:v((()=>[x(n(J))])),_:1},8,["class"])],10,Se))],2)):p("v-if",!0)]))],42,$e)))),128)),c(e.$slots,"append")])),_:3},8,["class","name"]))}}),[["__file","upload-list.vue"]]);const _e=j({disabled:{type:Boolean,default:!1}}),Ce={file:e=>m(e)},Pe=["onDrop","onDragover"],Ue="ElUploadDrag",je=e({name:Ue});var Be=M(e({...je,props:_e,emits:Ce,setup(e,{emit:t}){E(fe)||Q(Ue,"usage: <el-upload><el-upload-dragger /></el-upload>");const a=D("upload"),s=h(!1),i=X(),u=e=>{if(i.value)return;s.value=!1,e.stopPropagation();const a=Array.from(e.dataTransfer.files);t("file",a)},d=()=>{i.value||(s.value=!0)};return(e,t)=>(l(),o("div",{class:r([n(a).b("dragger"),n(a).is("dragover",s.value)]),onDrop:$(u,["prevent"]),onDragover:$(d,["prevent"]),onDragleave:t[0]||(t[0]=$((e=>s.value=!1),["prevent"]))},[c(e.$slots,"default")],42,Pe))}}),[["__file","upload-dragger.vue"]]);const De=j({...be,beforeUpload:{type:B(Function),default:g},onRemove:{type:B(Function),default:g},onStart:{type:B(Function),default:g},onSuccess:{type:B(Function),default:g},onProgress:{type:B(Function),default:g},onError:{type:B(Function),default:g},onExceed:{type:B(Function),default:g}}),Oe=["onKeydown"],Ne=["name","multiple","accept"],qe=e({name:"ElUploadContent",inheritAttrs:!1});var He=M(e({...qe,props:De,setup(e,{expose:t}){const s=e,u=D("upload"),d=X(),p=R({}),y=R(),m=e=>{if(0===e.length)return;const{autoUpload:t,limit:a,fileList:l,multiple:o,onStart:r,onExceed:n}=s;if(a&&l.length+e.length>a)n(e,l);else{o||(e=e.slice(0,1));for(const a of e){const e=a;e.uid=he(),r(e),t&&g(e)}}},g=async e=>{if(y.value.value="",!s.beforeUpload)return h(e);let t,a={};try{const l=s.data,o=s.beforeUpload(e);a=S(s.data)?le(s.data):s.data,t=await o,S(s.data)&&se(l,a)&&(a=le(s.data))}catch(o){t=!1}if(!1===t)return void s.onRemove(e);let l=e;t instanceof Blob&&(l=t instanceof File?t:new File([t],e.name,{type:e.type})),h(Object.assign(l,{uid:e.uid}),a)},h=async(e,t)=>{const{headers:l,data:o,method:r,withCredentials:n,name:i,action:u,onProgress:c,onSuccess:d,onError:f,httpRequest:v}=s;try{t=await(async(e,t)=>a(e)?e(t):e)(null!=t?t:o,e)}catch(h){return void s.onRemove(e)}const{uid:y}=e,m={headers:l||{},withCredentials:n,file:e,data:t,method:r,filename:i,action:u,onProgress:t=>{c(t,e)},onSuccess:t=>{d(t,e),delete p.value[y]},onError:t=>{f(t,e),delete p.value[y]}},g=v(m);p.value[y]=g,g instanceof Promise&&g.then(m.onSuccess,m.onError)},b=e=>{const t=e.target.files;t&&m(Array.from(t))},k=()=>{d.value||(y.value.value="",y.value.click())},x=()=>{k()};return t({abort:e=>{Y(p.value).filter(e?([t])=>String(e.uid)===t:()=>!0).forEach((([e,t])=>{t instanceof XMLHttpRequest&&t.abort(),delete p.value[e]}))},upload:g}),(e,t)=>(l(),o("div",{class:r([n(u).b(),n(u).m(e.listType),n(u).is("drag",e.drag)]),tabindex:"0",onClick:k,onKeydown:w($(x,["self"]),["enter","space"])},[e.drag?(l(),f(Be,{key:0,disabled:n(d),onFile:m},{default:v((()=>[c(e.$slots,"default")])),_:3},8,["disabled"])):c(e.$slots,"default",{key:1}),i("input",{ref_key:"inputRef",ref:y,class:r(n(u).e("input")),name:e.name,multiple:e.multiple,accept:e.accept,type:"file",onChange:b,onClick:t[0]||(t[0]=$((()=>{}),["stop"]))},null,42,Ne)],42,Oe))}}),[["__file","upload-content.vue"]]);const Ae="ElUpload",Ie=e=>{var t;(null==(t=e.url)?void 0:t.startsWith("blob:"))&&URL.revokeObjectURL(e.url)},Me=e({name:"ElUpload"});const Ke=K(M(e({...Me,props:ke,setup(e,{expose:a}){const s=e,r=X(),i=R(),{abort:u,submit:d,clearFiles:y,uploadFiles:m,handleStart:g,handleError:h,handleRemove:b,handleSuccess:k,handleProgress:w,revokeFileObjectURL:$}=((e,t)=>{const a=te(e,"fileList",void 0,{passive:!0}),s=e=>a.value.find((t=>t.uid===e.uid));function l(e){var a;null==(a=t.value)||a.abort(e)}return T((()=>e.listType),(t=>{"picture-card"!==t&&"picture"!==t||(a.value=a.value.map((t=>{const{raw:s,url:l}=t;if(!l&&s)try{t.url=URL.createObjectURL(s)}catch(o){e.onError(o,t,a.value)}return t})))})),T(a,(e=>{for(const t of e)t.uid||(t.uid=he()),t.status||(t.status="success")}),{immediate:!0,deep:!0}),{uploadFiles:a,abort:l,clearFiles:function(e=["ready","uploading","success","fail"]){a.value=a.value.filter((t=>!e.includes(t.status)))},handleError:(t,l)=>{const o=s(l);o&&(o.status="fail",a.value.splice(a.value.indexOf(o),1),e.onError(t,o,a.value),e.onChange(o,a.value))},handleProgress:(t,l)=>{const o=s(l);o&&(e.onProgress(t,o,a.value),o.status="uploading",o.percentage=Math.round(t.percent))},handleStart:t=>{W(t.uid)&&(t.uid=he());const s={name:t.name,percentage:0,status:"ready",size:t.size,raw:t,uid:t.uid};if("picture-card"===e.listType||"picture"===e.listType)try{s.url=URL.createObjectURL(t)}catch(l){Z(Ae,l.message),e.onError(l,s,a.value)}a.value=[...a.value,s],e.onChange(s,a.value)},handleSuccess:(t,l)=>{const o=s(l);o&&(o.status="success",o.response=t,e.onSuccess(t,o,a.value),e.onChange(o,a.value))},handleRemove:async t=>{const o=t instanceof File?s(t):t;o||Q(Ae,"file to be removed not found");const r=t=>{l(t);const s=a.value;s.splice(s.indexOf(t),1),e.onRemove(t,s),Ie(t)};e.beforeRemove?!1!==await e.beforeRemove(o,a.value)&&r(o):r(o)},submit:function(){a.value.filter((({status:e})=>"ready"===e)).forEach((({raw:e})=>{var a;return e&&(null==(a=t.value)?void 0:a.upload(e))}))},revokeFileObjectURL:Ie}})(s,i),F=t((()=>"picture-card"===s.listType)),E=t((()=>({...s,fileList:m.value,onStart:g,onProgress:w,onSuccess:k,onError:h,onRemove:b})));return L((()=>{m.value.forEach($)})),_(fe,{accept:C(s,"accept")}),a({abort:u,submit:d,clearFiles:y,handleStart:g,handleRemove:b}),(e,t)=>(l(),o("div",null,[n(F)&&e.showFileList?(l(),f(Le,{key:0,disabled:n(r),"list-type":e.listType,files:n(m),crossorigin:e.crossorigin,"handle-preview":e.onPreview,onRemove:n(b)},P({append:v((()=>[x(He,U({ref_key:"uploadRef",ref:i},n(E)),{default:v((()=>[e.$slots.trigger?c(e.$slots,"trigger",{key:0}):p("v-if",!0),!e.$slots.trigger&&e.$slots.default?c(e.$slots,"default",{key:1}):p("v-if",!0)])),_:3},16)])),_:2},[e.$slots.file?{name:"default",fn:v((({file:t})=>[c(e.$slots,"file",{file:t})]))}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):p("v-if",!0),!n(F)||n(F)&&!e.showFileList?(l(),f(He,U({key:1,ref_key:"uploadRef",ref:i},n(E)),{default:v((()=>[e.$slots.trigger?c(e.$slots,"trigger",{key:0}):p("v-if",!0),!e.$slots.trigger&&e.$slots.default?c(e.$slots,"default",{key:1}):p("v-if",!0)])),_:3},16)):p("v-if",!0),e.$slots.trigger?c(e.$slots,"default",{key:2}):p("v-if",!0),c(e.$slots,"tip"),!n(F)&&e.showFileList?(l(),f(Le,{key:3,disabled:n(r),"list-type":e.listType,files:n(m),crossorigin:e.crossorigin,"handle-preview":e.onPreview,onRemove:n(b)},P({_:2},[e.$slots.file?{name:"default",fn:v((({file:t})=>[c(e.$slots,"file",{file:t})]))}:void 0]),1032,["disabled","list-type","files","crossorigin","handle-preview","onRemove"])):p("v-if",!0)]))}}),[["__file","upload.vue"]]));export{Ke as E};
