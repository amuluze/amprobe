import{x as e}from"./el-button.wSr2vfOs.js";import{E as a,a as t}from"./el-col.B5VpcD8q.js";import{_ as s}from"./index.DzEwgUU7.js";import{E as o}from"./el-card.qxUhNo9k.js";import"./message.bOUkP4cz.js";/* empty css               */import{E as i,a as l}from"./el-select.Djdc0_BA.js";import"./el-popper.B5lc-jMO.js";import{a as n,d as r,b as d,e as m,c as u,f as p,g as c}from"./index.BqDuBUYv.js";import{c as h}from"./convert.B8xZ5nZn.js";import{d as v}from"./dayjs.min.BglOJP2w.js";import{d as y,r as f,x as b,o as g,X as x,B as _,k as w,f as j,m as S,w as A,F as E,a as C,u as k,Y as F,Q as R,t as G,S as L,U as P,_ as U}from"./index.C-XteKAQ.js";import"./index.W1JDYdlb.js";import"./index.HJW_Xvjo.js";import"./use-form-item.BHwM85F6.js";import"./index.BYpNppOK.js";import"./isEqual.Bn-GIEBR.js";import"./_Uint8Array.DhThSVct.js";import"./scroll.COMsDKDo.js";import"./castArray.DN6WFAt4.js";import"./focus-trap.BwkBla3c.js";import"./index.Bs0cFoC_.js";const z={tooltip:{trigger:"axis",formatter:function(e){return(e=e[0]).value+"%"},axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:[{name:"CPU 使用率"}],left:"right"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:[0,0,0,0,0,0,0,0,0,0]},yAxis:[{type:"value",axisLabel:{show:!0,formatter:"{value} %"}}],series:[{name:"CPU 使用率",type:"line",smooth:!0,lineStyle:{width:2},data:[0,0,0,0,0,0,0,0,0,0]}]},K={tooltip:{trigger:"axis",formatter:function(e){return(e=e[0]).value+"%"},axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:["内存使用率"],left:"right"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:[0,0,0,0,0,0,0,0,0,0]},yAxis:[{type:"value",axisLabel:{show:!0,formatter:"{value} %"}}],series:[{name:"内存使用率",type:"line",smooth:!0,lineStyle:{width:2},data:[0,0,0,0,0,0,0,0,0,0]}]},I={tooltip:{trigger:"axis",formatter:function(e){let a="";return e.forEach((e=>{const t=["bps","Kbps","Mbps","Gbps"];let s=0;for(;e.value>=1024&&s<t.length-1;)e.value/=1024,s++;a+=e.seriesName+": "+e.value.toFixed(2)+" "+t[s]+"<br/>"})),a},axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:["Read","Write"],left:"right"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:[0,0,0,0,0,0,0,0,0,0]},yAxis:[{type:"value",axisLabel:{show:!0,formatter:function(e){const a=["bps","Kbps","Mbps","Gbps"];let t=0;for(;e>=1024&&t<a.length-1;)e/=1024,t++;return e.toFixed(2)+" "+a[t]}}}],series:[{name:"Read",type:"line",smooth:!0,lineStyle:{width:2},data:[0,0,0,0,0,0,0,0,0,0]},{name:"Write",type:"line",smooth:!0,lineStyle:{width:2},data:[0,0,0,0,0,0,0,0,0,0]}]},M={tooltip:{trigger:"axis",formatter:function(e){let a="";return e.forEach((e=>{const t=["bps","Kbps","Mbps","Gbps"];let s=0;for(;e.value>=1024&&s<t.length-1;)e.value/=1024,s++;a+=e.seriesName+": "+e.value.toFixed(2)+" "+t[s]+"<br/>"})),a},axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:["Receive","Send"],left:"right"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:[0,0,0,0,0,0,0,0,0,0]},yAxis:[{type:"value",axisLabel:{show:!0,formatter:function(e){const a=["bps","Kbps","Mbps","Gbps"];let t=0;for(;e>=1024&&t<a.length-1;)e/=1024,t++;return e.toFixed(2)+" "+a[t]}}}],series:[{name:"Receive",type:"line",smooth:!0,lineStyle:{width:2},data:[0,0,0,0,0,0,0,0,0,0]},{name:"Send",type:"line",smooth:!0,lineStyle:{width:2},data:[0,0,0,0,0,0,0,0,0,0]}]},W=e=>(L("data-v-5d737147"),e=e(),P(),e),V={class:"am-host-header"},$={class:"am-host-operator"},B=W((()=>j("span",null,"时间密度：",-1))),N={class:"am-host-content"},q=W((()=>j("div",{class:"am-host-container__image-title"},"CPU 总使用率",-1))),D={class:"am-host-container__image-description"},H=W((()=>j("div",{class:"am-host-container__image-title"},"内存使用率",-1))),J={class:"am-host-container__image-description"},Q=W((()=>j("div",{class:"am-host-container__image-title"},"磁盘使用率",-1))),X=W((()=>j("div",{class:"am-host-container__image-title"},"流量曲线图",-1))),Y=U(y({__name:"index",setup(y){const L=f(600),P=[{value:120,label:"2分钟"},{value:300,label:"5分钟"},{value:600,label:"10分钟"},{value:1800,label:"30分钟"},{value:3600,label:"1 小时"},{value:43200,label:"12小时"},{value:86400,label:"24小时"}],U=f("0.0%"),W=async()=>{const{data:e}=await n();U.value=e.percent.toFixed(2)+"%"},Y=b(z),O=async()=>{const a={start_time:v().unix()-L.value,end_time:v().unix()},{data:t}=await r(a),s=t.data;e(Y,"xAxis.data",s.map((e=>v(1e3*e.timestamp).hour()+":"+v(1e3*e.timestamp).minute()))),e(Y,"legend.data",["CPU使用率"]),e(Y,"series",[{name:"CPU使用率",data:s.map((e=>e.value.toFixed(2))),type:"line",smooth:!0,showSymbol:!1}])},T=f({percent:"0%",total:"0",used:"0"}),Z=async()=>{const{data:e}=await d();T.value.percent=e.percent.toFixed(2)+"%",T.value.total=h(e.total),T.value.used=h(e.used)},ee=b(K),ae=async()=>{const a={start_time:v().unix()-L.value,end_time:v().unix()},{data:t}=await m(a),s=t.data;e(ee,"xAxis.data",s.map((e=>v(1e3*e.timestamp).hour()+":"+v(1e3*e.timestamp).minute()))),e(ee,"legend.data",["内存使用率"]),e(ee,"series",[{name:"内存使用率",data:s.map((e=>e.value.toFixed(2))),type:"line",smooth:!0,showSymbol:!1}])},te=f([]),se=async()=>{const{data:e}=await u();te.value=[],e.info.map((e=>{te.value.push({device:e.device,total:h(e.total),used:h(e.used),percent:e.percent.toFixed(2)+"%"})}))},oe=b(I),ie=async()=>{const a={start_time:v().unix()-L.value,end_time:v().unix()},{data:t}=await p(a),s=t;e(oe,"xAxis.data",s.usage[0].data.map((e=>v(1e3*e.timestamp).hour()+":"+v(1e3*e.timestamp).minute()))),e(oe,"legend.data",(e=>{let a=[];return["Read","Write"].forEach((t=>{e.forEach((e=>{a.push(e.device+"_"+t)}))})),a})(s.usage)),e(oe,"series",(e=>{let a=[];return["Read","Write"].forEach((t=>{e.forEach((e=>{"Read"===t?a.push({name:e.device+"_"+t,data:e.data.map((e=>e.io_read)),type:"line",smooth:!0,showSymbol:!0,symbolSize:2,hoverAnimation:!0}):a.push({name:e.device+"_"+t,data:e.data.map((e=>e.io_write)),type:"line",smooth:!0,showSymbol:!0,symbolSize:2,hoverAnimation:!0})}))})),a})(s.usage))},le=f([]),ne=b(M),re=async()=>{const a={start_time:v().unix()-L.value,end_time:v().unix()},{data:t}=await c(a),s=t;le.value=[],s.usage.map((e=>{le.value.push({ethernet:e.ethernet,read:h(e.data[e.data.length-1].bytes_recv),write:h(e.data[e.data.length-1].bytes_sent)})})),e(ne,"xAxis.data",s.usage[0].data.map((e=>v(1e3*e.timestamp).hour()+":"+v(1e3*e.timestamp).minute()))),e(ne,"legend.data",(e=>{let a=[];return["Receive","Send"].forEach((t=>{e.forEach((e=>{a.push(e.ethernet+"_"+t)}))})),a})(s.usage)),e(ne,"series",(e=>{let a=[];return["Receive","Send"].forEach((t=>{e.forEach((e=>{"Receive"===t?a.push({name:e.ethernet+"_"+t,data:e.data.map((e=>e.bytes_recv)),type:"line",showSymbol:!0,symbolSize:2,hoverAnimation:!0,smooth:!0}):a.push({name:e.ethernet+"_"+t,data:e.data.map((e=>e.bytes_sent)),type:"line",showSymbol:!0,symbolSize:2,hoverAnimation:!0,smooth:!0})}))})),a})(s.usage))},de=f();return g((()=>{W(),O(),Z(),ae(),se(),ie(),re(),de.value=setInterval((()=>{W(),O(),Z(),ae(),se(),ie(),re()}),5e3)})),x((()=>{clearInterval(de.value)})),_((()=>L.value),(()=>{W(),O(),Z(),ae(),se(),ie(),re()})),(e,n)=>{const r=l,d=i,m=o,u=s,p=t,c=a;return C(),w(E,null,[j("div",V,[j("span",{onClick:n[0]||(n[0]=a=>e.$router.push("/host/monitor"))},"监控"),j("span",{onClick:n[1]||(n[1]=a=>e.$router.push("/host/file"))},"文件"),j("span",{onClick:n[2]||(n[2]=a=>e.$router.push("/host/settings"))},"设置")]),j("div",$,[S(m,{shadow:"never"},{default:A((()=>[B,S(d,{modelValue:k(L),"onUpdate:modelValue":n[3]||(n[3]=e=>F(L)?L.value=e:null),placeholder:"Select",size:"default",style:{width:"120px"}},{default:A((()=>[(C(),w(E,null,R(P,(e=>S(r,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])])),_:1})]),j("div",N,[S(c,{gutter:4},{default:A((()=>[S(p,{span:12},{default:A((()=>[S(m,{shadow:"never"},{default:A((()=>[S(u,{option:k(Y)},{default:A((()=>[q,j("div",D,"百分比： "+G(k(U)),1)])),_:1},8,["option"])])),_:1})])),_:1}),S(p,{span:12},{default:A((()=>[S(m,{shadow:"never"},{default:A((()=>[S(u,{option:k(ee)},{default:A((()=>[H,j("div",J," 总量："+G(k(T).total)+" 使用："+G(k(T).used)+" 百分比： "+G(k(T).percent),1)])),_:1},8,["option"])])),_:1})])),_:1})])),_:1}),S(c,{gutter:4},{default:A((()=>[S(p,{span:12},{default:A((()=>[S(m,{shadow:"never"},{default:A((()=>[S(u,{option:k(oe)},{default:A((()=>[Q,(C(!0),w(E,null,R(k(te),((e,a)=>(C(),w("div",{key:a,class:"am-host-container__image-description"},G(e.device)+" 总量："+G(e.total)+" 使用："+G(e.used)+" 百分比： "+G(e.percent),1)))),128))])),_:1},8,["option"])])),_:1})])),_:1}),S(p,{span:12},{default:A((()=>[S(m,{shadow:"never"},{default:A((()=>[S(u,{option:k(ne)},{default:A((()=>[X,(C(!0),w(E,null,R(k(le),((e,a)=>(C(),w("div",{key:a,class:"am-host-container__image-description"},G(e.ethernet)+" 接收："+G(e.read)+" 发送："+G(e.write),1)))),128))])),_:1},8,["option"])])),_:1})])),_:1})])),_:1})])],64)}}}),[["__scopeId","data-v-5d737147"]]);export{Y as default};
