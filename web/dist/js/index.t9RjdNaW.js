import{x as e}from"./el-button.BjoBO7gr.js";import{E as a,a as t}from"./el-col.CnTfXacE.js";import{_ as s}from"./index.lBRon92R.js";import{E as o}from"./el-card.L05dtrPJ.js";import"./message.CGCr1_ri.js";/* empty css               */import{E as i,a as l}from"./el-select.6CKOSpid.js";import"./el-popper.DAgRe_4_.js";import{a as n,d as r,b as d,e as m,c as u,f as p,g as c}from"./index.DQyKqW_y.js";import{c as h}from"./convert.B8xZ5nZn.js";import{d as v}from"./dayjs.min.BglOJP2w.js";import{d as y,r as f,x as b,o as g,W as x,B as _,k as w,f as j,m as S,w as A,F as E,a as k,u as C,X as R,P,t as F,R as L,S as G,_ as U}from"./index.uYlXueq8.js";import"./index.Bnc2yDHC.js";import"./index.DYXx8Gyw.js";import"./event.BwRzfsZt.js";import"./use-form-item.BK24vgth.js";import"./index.AUD6zAb7.js";import"./token.DWNpOE8r.js";import"./isEqual.AaDxTWef.js";import"./_Uint8Array.BmwZGk8g.js";import"./scroll.D6lis9rj.js";import"./castArray.8IR8Ymat.js";import"./focus-trap.DFYIA1qy.js";import"./index.CSTJ0c2Y.js";const z={tooltip:{trigger:"axis",formatter:function(e){return(e=e[0]).value+"%"},axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:[{name:"CPU 使用率"}],left:"right"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:[0,0,0,0,0,0,0,0,0,0]},yAxis:[{type:"value",axisLabel:{show:!0,formatter:"{value} %"}}],series:[{name:"CPU 使用率",type:"line",smooth:!0,lineStyle:{width:2},data:[0,0,0,0,0,0,0,0,0,0]}]},K={tooltip:{trigger:"axis",formatter:function(e){return(e=e[0]).value+"%"},axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:["内存使用率"],left:"right"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:[0,0,0,0,0,0,0,0,0,0]},yAxis:[{type:"value",axisLabel:{show:!0,formatter:"{value} %"}}],series:[{name:"内存使用率",type:"line",smooth:!0,lineStyle:{width:2},data:[0,0,0,0,0,0,0,0,0,0]}]},W={tooltip:{trigger:"axis",formatter:function(e){let a="";return e.forEach((e=>{const t=["bps","Kbps","Mbps","Gbps"];let s=0;for(;e.value>=1024&&s<t.length-1;)e.value/=1024,s++;a+=e.seriesName+": "+e.value.toFixed(2)+" "+t[s]+"<br/>"})),a},axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:["Read","Write"],left:"right"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:[0,0,0,0,0,0,0,0,0,0]},yAxis:[{type:"value",axisLabel:{show:!0,formatter:function(e){const a=["bps","Kbps","Mbps","Gbps"];let t=0;for(;e>=1024&&t<a.length-1;)e/=1024,t++;return e.toFixed(2)+" "+a[t]}}}],series:[{name:"Read",type:"line",smooth:!0,lineStyle:{width:2},data:[0,0,0,0,0,0,0,0,0,0]},{name:"Write",type:"line",smooth:!0,lineStyle:{width:2},data:[0,0,0,0,0,0,0,0,0,0]}]},M={tooltip:{trigger:"axis",formatter:function(e){let a="";return e.forEach((e=>{const t=["bps","Kbps","Mbps","Gbps"];let s=0;for(;e.value>=1024&&s<t.length-1;)e.value/=1024,s++;a+=e.seriesName+": "+e.value.toFixed(2)+" "+t[s]+"<br/>"})),a},axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:["Receive","Send"],left:"right"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:[0,0,0,0,0,0,0,0,0,0]},yAxis:[{type:"value",axisLabel:{show:!0,formatter:function(e){const a=["bps","Kbps","Mbps","Gbps"];let t=0;for(;e>=1024&&t<a.length-1;)e/=1024,t++;return e.toFixed(2)+" "+a[t]}}}],series:[{name:"Receive",type:"line",smooth:!0,lineStyle:{width:2},data:[0,0,0,0,0,0,0,0,0,0]},{name:"Send",type:"line",smooth:!0,lineStyle:{width:2},data:[0,0,0,0,0,0,0,0,0,0]}]},I=e=>(L("data-v-d239a283"),e=e(),G(),e),N={class:"am-host-header"},V={class:"am-host-operator"},$=I((()=>j("span",null,"时间密度：",-1))),q={class:"am-host-content"},B=I((()=>j("div",{class:"am-host-container__image-title"},"CPU 总使用率",-1))),H={class:"am-host-container__image-description"},J=I((()=>j("div",{class:"am-host-container__image-title"},"内存使用率",-1))),O={class:"am-host-container__image-description"},Q=I((()=>j("div",{class:"am-host-container__image-title"},"磁盘使用率",-1))),T=I((()=>j("div",{class:"am-host-container__image-title"},"流量曲线图",-1))),X=U(y({__name:"index",setup(y){const L=f(600),G=[{value:120,label:"2分钟"},{value:300,label:"5分钟"},{value:600,label:"10分钟"},{value:1800,label:"30分钟"},{value:3600,label:"1 小时"},{value:43200,label:"12小时"},{value:86400,label:"24小时"}],U=f("0.0%"),I=async()=>{const{data:e}=await n();U.value=e.percent.toFixed(2)+"%"},X=b(z),D=async()=>{const a={start_time:v().unix()-L.value,end_time:v().unix()},{data:t}=await r(a),s=t.data;e(X,"xAxis.data",s.map((e=>v(1e3*e.timestamp).hour()+":"+v(1e3*e.timestamp).minute()))),e(X,"legend.data",["CPU使用率"]),e(X,"series",[{name:"CPU使用率",data:s.map((e=>e.value.toFixed(2))),type:"line",smooth:!0,showSymbol:!1}])},Y=f({percent:"0%",total:"0",used:"0"}),Z=async()=>{const{data:e}=await d();Y.value.percent=e.percent.toFixed(2)+"%",Y.value.total=h(e.total),Y.value.used=h(e.used)},ee=b(K),ae=async()=>{const a={start_time:v().unix()-L.value,end_time:v().unix()},{data:t}=await m(a),s=t.data;e(ee,"xAxis.data",s.map((e=>v(1e3*e.timestamp).hour()+":"+v(1e3*e.timestamp).minute()))),e(ee,"legend.data",["内存使用率"]),e(ee,"series",[{name:"内存使用率",data:s.map((e=>e.value.toFixed(2))),type:"line",smooth:!0,showSymbol:!1}])},te=f([]),se=async()=>{const{data:e}=await u();te.value=[],e.info.map((e=>{te.value.push({device:e.device,total:h(e.total),used:h(e.used),percent:e.percent.toFixed(2)+"%"})}))},oe=b(W),ie=async()=>{const a={start_time:v().unix()-L.value,end_time:v().unix()},{data:t}=await p(a),s=t;e(oe,"xAxis.data",s.usage[0].data.map((e=>v(1e3*e.timestamp).hour()+":"+v(1e3*e.timestamp).minute()))),e(oe,"legend.data",(e=>{let a=[];return["Read","Write"].forEach((t=>{e.forEach((e=>{a.push(e.device+"_"+t)}))})),a})(s.usage)),e(oe,"series",(e=>{let a=[];return["Read","Write"].forEach((t=>{e.forEach((e=>{"Read"===t?a.push({name:e.device+"_"+t,data:e.data.map((e=>e.io_read)),type:"line",smooth:!0,showSymbol:!0,symbolSize:2,hoverAnimation:!0}):a.push({name:e.device+"_"+t,data:e.data.map((e=>e.io_write)),type:"line",smooth:!0,showSymbol:!0,symbolSize:2,hoverAnimation:!0})}))})),a})(s.usage))},le=f([]),ne=b(M),re=async()=>{const a={start_time:v().unix()-L.value,end_time:v().unix()},{data:t}=await c(a),s=t;le.value=[],s.usage.map((e=>{le.value.push({ethernet:e.ethernet,read:h(e.data[e.data.length-1].bytes_recv),write:h(e.data[e.data.length-1].bytes_sent)})})),e(ne,"xAxis.data",s.usage[0].data.map((e=>v(1e3*e.timestamp).hour()+":"+v(1e3*e.timestamp).minute()))),e(ne,"legend.data",(e=>{let a=[];return["Receive","Send"].forEach((t=>{e.forEach((e=>{a.push(e.ethernet+"_"+t)}))})),a})(s.usage)),e(ne,"series",(e=>{let a=[];return["Receive","Send"].forEach((t=>{e.forEach((e=>{"Receive"===t?a.push({name:e.ethernet+"_"+t,data:e.data.map((e=>e.bytes_recv)),type:"line",showSymbol:!0,symbolSize:2,hoverAnimation:!0,smooth:!0}):a.push({name:e.ethernet+"_"+t,data:e.data.map((e=>e.bytes_sent)),type:"line",showSymbol:!0,symbolSize:2,hoverAnimation:!0,smooth:!0})}))})),a})(s.usage))},de=f();return g((()=>{I(),D(),Z(),ae(),se(),ie(),re(),de.value=setInterval((()=>{I(),D(),Z(),ae(),se(),ie(),re()}),5e3)})),x((()=>{clearInterval(de.value)})),_((()=>L.value),(()=>{I(),D(),Z(),ae(),se(),ie(),re()})),(e,n)=>{const r=l,d=i,m=o,u=s,p=t,c=a;return k(),w(E,null,[j("div",N,[j("span",{onClick:n[0]||(n[0]=a=>e.$router.push("/host/monitor"))},"监控"),j("span",{onClick:n[1]||(n[1]=a=>e.$router.push("/host/file"))},"文件"),j("span",{onClick:n[2]||(n[2]=a=>e.$router.push("/host/settings"))},"设置")]),j("div",V,[S(m,{shadow:"never"},{default:A((()=>[$,S(d,{modelValue:C(L),"onUpdate:modelValue":n[3]||(n[3]=e=>R(L)?L.value=e:null),placeholder:"Select",size:"default",style:{width:"120px"}},{default:A((()=>[(k(),w(E,null,P(G,(e=>S(r,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])])),_:1})]),j("div",q,[S(c,{gutter:4},{default:A((()=>[S(p,{span:12},{default:A((()=>[S(m,{shadow:"never"},{default:A((()=>[S(u,{option:C(X)},{default:A((()=>[B,j("div",H,"百分比： "+F(C(U)),1)])),_:1},8,["option"])])),_:1})])),_:1}),S(p,{span:12},{default:A((()=>[S(m,{shadow:"never"},{default:A((()=>[S(u,{option:C(ee)},{default:A((()=>[J,j("div",O,"总量："+F(C(Y).total)+" 使用："+F(C(Y).used)+" 百分比： "+F(C(Y).percent),1)])),_:1},8,["option"])])),_:1})])),_:1})])),_:1}),S(c,{gutter:4},{default:A((()=>[S(p,{span:12},{default:A((()=>[S(m,{shadow:"never"},{default:A((()=>[S(u,{option:C(oe)},{default:A((()=>[Q,(k(!0),w(E,null,P(C(te),((e,a)=>(k(),w("div",{key:a,class:"am-host-container__image-description"},F(e.device)+" 总量："+F(e.total)+" 使用："+F(e.used)+" 百分比： "+F(e.percent),1)))),128))])),_:1},8,["option"])])),_:1})])),_:1}),S(p,{span:12},{default:A((()=>[S(m,{shadow:"never"},{default:A((()=>[S(u,{option:C(ne)},{default:A((()=>[T,(k(!0),w(E,null,P(C(le),((e,a)=>(k(),w("div",{key:a,class:"am-host-container__image-description"},F(e.ethernet)+" 接收："+F(e.read)+" 发送："+F(e.write),1)))),128))])),_:1},8,["option"])])),_:1})])),_:1})])),_:1})])],64)}}}),[["__scopeId","data-v-d239a283"]]);export{X as default};
