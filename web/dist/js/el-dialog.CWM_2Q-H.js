import{o as e,K as o,H as s,d as a,E as t,c as l,a as n,k as r,f as d,j as i,n as c,u,t as f,m as v,w as m,b as p,h as g,i as b,g as h,C as y,r as C,G as E,e as k,D as w,a3 as R,v as $,T as L,ab as A}from"./index.CcWlFavh.js";import{d as _,b as M,c as F,e as x,f as I,E as j,a as T}from"./use-dialog.BzA524NB.js";import{k as X,y as Y,E as B,_ as D,C as q,O as z,j as K,m as P}from"./el-button.BK6voByF.js";import{F as S,E as H}from"./focus-trap.CFBBOCaf.js";import{c as O}from"./refs.F2B_LDe0.js";const G=(a,t,l,n)=>{let r={offsetX:0,offsetY:0};const d=e=>{const o=e.clientX,s=e.clientY,{offsetX:t,offsetY:l}=r,d=a.value.getBoundingClientRect(),i=d.left,c=d.top,u=d.width,f=d.height,v=document.documentElement.clientWidth,m=document.documentElement.clientHeight,p=-i+t,g=-c+l,b=v-i-u+t,h=m-c-f+l,y=e=>{let d=t+e.clientX-o,i=l+e.clientY-s;(null==n?void 0:n.value)||(d=Math.min(Math.max(d,p),b),i=Math.min(Math.max(i,g),h)),r={offsetX:d,offsetY:i},a.value&&(a.value.style.transform=`translate(${X(d)}, ${X(i)})`)},C=()=>{document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",C)};document.addEventListener("mousemove",y),document.addEventListener("mouseup",C)},i=()=>{t.value&&a.value&&t.value.removeEventListener("mousedown",d)};e((()=>{o((()=>{l.value?t.value&&a.value&&t.value.addEventListener("mousedown",d):i()}))})),s((()=>{i()}))},U=Symbol("dialogInjectionKey"),W=["aria-level"],J=["aria-label"],N=["id"],Q=a({name:"ElDialogContent"});var V=D(a({...Q,props:_,emits:M,setup(e){const o=e,{t:s}=Y(),{Close:a}=q,{dialogRef:y,headerRef:C,bodyId:E,ns:k,style:w}=t(U),{focusTrapRef:R}=t(S),$=l((()=>[k.b(),k.is("fullscreen",o.fullscreen),k.is("draggable",o.draggable),k.is("align-center",o.alignCenter),{[k.m("center")]:o.center}])),L=O(R,y),A=l((()=>o.draggable)),_=l((()=>o.overflow));return G(y,C,A,_),(e,o)=>(n(),r("div",{ref:u(L),class:c(u($)),style:h(u(w)),tabindex:"-1"},[d("header",{ref_key:"headerRef",ref:C,class:c([u(k).e("header"),{"show-close":e.showClose}])},[i(e.$slots,"header",{},(()=>[d("span",{role:"heading","aria-level":e.ariaLevel,class:c(u(k).e("title"))},f(e.title),11,W)])),e.showClose?(n(),r("button",{key:0,"aria-label":u(s)("el.dialog.close"),class:c(u(k).e("headerbtn")),type:"button",onClick:o[0]||(o[0]=o=>e.$emit("close"))},[v(u(B),{class:c(u(k).e("close"))},{default:m((()=>[(n(),p(g(e.closeIcon||u(a))))])),_:1},8,["class"])],10,J)):b("v-if",!0)],2),d("div",{id:u(E),class:c(u(k).e("body"))},[i(e.$slots,"default")],10,N),e.$slots.footer?(n(),r("footer",{key:0,class:c(u(k).e("footer"))},[i(e.$slots,"footer")],2)):b("v-if",!0)],6))}}),[["__file","dialog-content.vue"]]);const Z=["aria-label","aria-labelledby","aria-describedby"],ee=a({name:"ElDialog",inheritAttrs:!1});const oe=P(D(a({...ee,props:F,emits:x,setup(e,{expose:o}){const s=e,a=y();z({scope:"el-dialog",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/dialog.html#slots"},l((()=>!!a.title)));const t=K("dialog"),r=C(),f=C(),g=C(),{visible:_,titleId:M,bodyId:F,style:x,overlayDialogStyle:X,rendered:Y,zIndex:B,afterEnter:D,afterLeave:q,beforeLeave:P,handleClose:S,onModalClick:O,onOpenAutoFocus:G,onCloseAutoFocus:W,onCloseRequested:J,onFocusoutPrevented:N}=I(s,r);E(U,{dialogRef:r,headerRef:f,bodyId:F,ns:t,rendered:Y,style:x});const Q=T(O),ee=l((()=>s.draggable&&!s.fullscreen));return o({visible:_,dialogContentRef:g}),(e,o)=>(n(),p(A,{to:e.appendTo,disabled:"body"===e.appendTo&&!e.appendToBody},[v(L,{name:"dialog-fade",onAfterEnter:u(D),onAfterLeave:u(q),onBeforeLeave:u(P),persisted:""},{default:m((()=>[k(v(u(j),{"custom-mask-event":"",mask:e.modal,"overlay-class":e.modalClass,"z-index":u(B)},{default:m((()=>[d("div",{role:"dialog","aria-modal":"true","aria-label":e.title||void 0,"aria-labelledby":e.title?void 0:u(M),"aria-describedby":u(F),class:c(`${u(t).namespace.value}-overlay-dialog`),style:h(u(X)),onClick:o[0]||(o[0]=(...e)=>u(Q).onClick&&u(Q).onClick(...e)),onMousedown:o[1]||(o[1]=(...e)=>u(Q).onMousedown&&u(Q).onMousedown(...e)),onMouseup:o[2]||(o[2]=(...e)=>u(Q).onMouseup&&u(Q).onMouseup(...e))},[v(u(H),{loop:"",trapped:u(_),"focus-start-el":"container",onFocusAfterTrapped:u(G),onFocusAfterReleased:u(W),onFocusoutPrevented:u(N),onReleaseRequested:u(J)},{default:m((()=>[u(Y)?(n(),p(V,w({key:0,ref_key:"dialogContentRef",ref:g},e.$attrs,{center:e.center,"align-center":e.alignCenter,"close-icon":e.closeIcon,draggable:u(ee),overflow:e.overflow,fullscreen:e.fullscreen,"show-close":e.showClose,title:e.title,"aria-level":e.headerAriaLevel,onClose:u(S)}),R({header:m((()=>[e.$slots.title?i(e.$slots,"title",{key:1}):i(e.$slots,"header",{key:0,close:u(S),titleId:u(M),titleClass:u(t).e("title")})])),default:m((()=>[i(e.$slots,"default")])),_:2},[e.$slots.footer?{name:"footer",fn:m((()=>[i(e.$slots,"footer")]))}:void 0]),1040,["center","align-center","close-icon","draggable","overflow","fullscreen","show-close","title","aria-level","onClose"])):b("v-if",!0)])),_:3},8,["trapped","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])],46,Z)])),_:3},8,["mask","overlay-class","z-index"]),[[$,u(_)]])])),_:3},8,["onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["to","disabled"]))}}),[["__file","dialog.vue"]]));export{oe as E,G as u};
