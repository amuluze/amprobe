import"./el-button.BjoBO7gr.js";import{v as e}from"./el-loading.DfFQSHKu.js";import{E as a}from"./el-drawer.BU6O2wLC.js";import{e as t,s as l}from"./message.CGCr1_ri.js";import{a as o,E as r}from"./el-form-item.BSJPk9H4.js";/* empty css               */import{E as n,a as s}from"./el-select.6CKOSpid.js";import"./el-popper.DAgRe_4_.js";import{u as i,z as d,E as p,a as u}from"./zh-cn.Cbj5cIxv.js";import{E as m,a as w}from"./el-table-column.By6jK7Ub.js";import"./el-tooltip.l0sNRNKZ.js";import{E as c}from"./el-card.L05dtrPJ.js";import{c as k,i as g,j as b}from"./index.cucq6WIU.js";import{E as f}from"./index.uJQQwVZH.js";import{E as h}from"./index.Bnc2yDHC.js";import{d as v,o as j,r as _,x as y,k as C,f as V,m as x,w as z,u as E,X as S,F as U,a as M,A as G,e as P,b as q,P as N,_ as L}from"./index.uYlXueq8.js";import"./use-dialog.BQbW5qj8.js";import"./vnode.nPexdVgf.js";import"./event.BwRzfsZt.js";import"./use-form-item.BK24vgth.js";import"./index.DYXx8Gyw.js";import"./scroll.D6lis9rj.js";import"./focus-trap.DFYIA1qy.js";import"./castArray.8IR8Ymat.js";import"./_baseClone.CcQ2SXwG.js";import"./_Uint8Array.BmwZGk8g.js";import"./_initCloneObject.CF8SazBh.js";import"./index.AUD6zAb7.js";import"./token.DWNpOE8r.js";import"./isEqual.AaDxTWef.js";import"./index.CSTJ0c2Y.js";const $={class:"am-network-title"},A={class:"am-network-operator"},O={class:"am-table"},R={class:"am-pagination"},X={class:"am-network-create"},B={class:"am-network-create__content"},F={class:"am-network-create__operator"},H=L(v({__name:"index",setup(v){j((()=>{I()}));const L=_(0),{data:H,refresh:I,loading:K,pagination:T}=i(k,{},{}),Y=y({networkName:"",networkMode:"bridge",networkSubnet:"",networkGateway:"",networkLabels:""}),Z=_(!1),D=_(),J=y({networkName:[{required:!0,message:"Please input network name",trigger:"blur"}],networkMode:[{required:!0,message:"Please select network mode",trigger:"blur"}],networkSubnet:[{required:!0,message:"Please input network subnet",trigger:"blur"}],networkGateway:[{required:!0,message:"Please input network gateway",trigger:"blur"}]}),Q=[{value:"bridge",label:"bridge"},{value:"host",label:"host"}],W=_(!1);return(i,k)=>{const v=f,j=c,_=m,y=w,ee=p,ae=u,te=h,le=o,oe=s,re=n,ne=r,se=a,ie=e;return M(),C(U,null,[V("div",$,[V("span",{onClick:k[0]||(k[0]=e=>i.$router.push("/docker/container"))},"容器"),V("span",{onClick:k[1]||(k[1]=e=>i.$router.push("/docker/image"))},"镜像"),V("span",{onClick:k[2]||(k[2]=e=>i.$router.push("/docker/network"))},"网络"),V("span",{onClick:k[3]||(k[3]=e=>i.$router.push("/docker/settings"))},"设置")]),V("div",A,[x(j,{shadow:"never"},{default:z((()=>[x(v,{type:"primary",plain:"",onClick:k[4]||(k[4]=e=>Z.value=!0)},{default:z((()=>[G("创建网络")])),_:1})])),_:1})]),x(j,{shadow:"never"},{default:z((()=>[V("div",O,[P((M(),q(y,{data:E(H),key:E(L),"highlight-current-row":"",height:"100%",stripe:""},{default:z((()=>[x(_,{prop:"name",label:"名称",align:"center",width:"120",fixed:""}),x(_,{prop:"driver",label:"模式",align:"center","min-width":"120"}),x(_,{prop:"subnet",label:"子网",align:"center","show-overflow-tooltip":"",width:"120"}),x(_,{prop:"gateway",label:"网关",align:"center","show-overflow-tooltip":"",width:"120"}),x(_,{prop:"created",label:"创建时间",align:"center",width:"200",sortable:""}),x(_,{label:"操作",width:"160",fixed:"right",align:"center"},{default:z((e=>[x(v,{type:"danger",plain:"",size:"small",onClick:a=>(async e=>{let a={network_id:e};const{data:t}=await b(a);l("删除成功"),I()})(e.row.id)},{default:z((()=>[G(" 删除 ")])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"])),[[ie,E(K)]])]),V("div",R,[x(ae,{locale:E(d)},{default:z((()=>[x(ee,{"current-page":E(T).page,"onUpdate:currentPage":k[5]||(k[5]=e=>E(T).page=e),"page-size":E(T).size,layout:"total, sizes, prev, pager, next, jumper","page-sizes":E(T).sizeOption,total:E(T).total,onSizeChange:E(T).onSizeChange,onCurrentChange:E(T).onPageChange},null,8,["current-page","page-size","page-sizes","total","onSizeChange","onCurrentChange"])])),_:1},8,["locale"])])])),_:1}),V("div",X,[x(se,{modelValue:E(Z),"onUpdate:modelValue":k[13]||(k[13]=e=>S(Z)?Z.value=e:null),size:"540",title:"创建网络"},{default:z((()=>[V("div",B,[x(ne,{ref_key:"networkCreateRef",ref:D,model:E(Y),rules:E(J),"label-width":"100px","label-position":"left"},{default:z((()=>[x(le,{label:"名称",prop:"networkName"},{default:z((()=>[x(te,{modelValue:E(Y).networkName,"onUpdate:modelValue":k[6]||(k[6]=e=>E(Y).networkName=e),placeholder:"请输入名称"},null,8,["modelValue"])])),_:1}),x(le,{label:"模式",prop:"networkMode"},{default:z((()=>[x(re,{modelValue:E(Y).networkMode,"onUpdate:modelValue":k[7]||(k[7]=e=>E(Y).networkMode=e),style:{width:"240px"},placeholder:"请选择模式"},{default:z((()=>[(M(),C(U,null,N(Q,(e=>x(oe,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])])),_:1}),x(le,{label:"子网",prop:"networkSubnet"},{default:z((()=>[x(te,{modelValue:E(Y).networkSubnet,"onUpdate:modelValue":k[8]||(k[8]=e=>E(Y).networkSubnet=e),placeholder:"172.16.10.0/24"},null,8,["modelValue"])])),_:1}),x(le,{label:"网关",prop:"networkGateway"},{default:z((()=>[x(te,{modelValue:E(Y).networkGateway,"onUpdate:modelValue":k[9]||(k[9]=e=>E(Y).networkGateway=e),placeholder:"172.16.10.1"},null,8,["modelValue"])])),_:1}),x(le,{label:"标签",prop:"networkLabels"},{default:z((()=>[x(te,{modelValue:E(Y).networkLabels,"onUpdate:modelValue":k[10]||(k[10]=e=>E(Y).networkLabels=e),type:"textarea",rows:4,placeholder:"一行一个，例如:\nkey1=value1\nkey2=value2"},null,8,["modelValue"])])),_:1})])),_:1},8,["model","rules"])]),V("div",F,[x(v,{type:"default",size:"default",plain:"",onClick:k[11]||(k[11]=e=>Z.value=!1)},{default:z((()=>[G("取消")])),_:1}),P((M(),q(v,{type:"primary",size:"default",plain:"",onClick:k[12]||(k[12]=e=>(async e=>{e&&await(null==e?void 0:e.validate(((e,a)=>{if(e){W.value=!0;const e=new Map;Y.networkLabels.split("\n").forEach((a=>{const[t,l]=a.split("=");e.set(t,l)}));let a={name:Y.networkName,driver:Y.networkMode,network_sebnet:Y.networkSubnet,network_gateway:Y.networkGateway,labels:e};g(a).then((e=>{const{data:a}=e;W.value=!1,Z.value=!1,l("创建成功"),I()})).catch((e=>{t(e),W.value=!1}))}else t("请检查输入")})))})(E(D)))},{default:z((()=>[G(" 确定 ")])),_:1})),[[ie,E(W)]])])])),_:1},8,["modelValue"])])],64)}}}),[["__scopeId","data-v-7bae21e0"]]);export{H as default};
