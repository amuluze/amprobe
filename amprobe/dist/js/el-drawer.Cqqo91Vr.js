import{r as e,c as o,w as a,q as l,j as t,S as s,d as n,s as r,o as d,x as i,m as u,v as c,E as f,u as p,D as v,P as y,H as m,n as b,e as C,f as h,B as g,C as k,G as B,I as A,a6 as w}from"./index.DR6loZJs.js";import{b as F,d as x,i as S,c as E,B as D,g as L,j as I,u as R,E as $,C as j,_ as z,w as O}from"./base.CwKrOXiL.js";import{a as _,E as P}from"./index.mu6OJJAJ.js";import{h as T,n as q,o as N,l as M,k as H}from"./el-overlay.CI2e2OO9.js";import{U as V}from"./event.CWrEFZfq.js";import{u as G}from"./use-form-item.KseOUpWN.js";import{i as U,E as Z}from"./focus-trap.GHIWC1jm.js";const J=F({center:Boolean,alignCenter:Boolean,closeIcon:{type:T},draggable:Boolean,overflow:Boolean,fullscreen:Boolean,showClose:{type:Boolean,default:!0},title:{type:String,default:""},ariaLevel:{type:String,default:"2"}}),K={close:()=>!0},Q=F({...J,appendToBody:Boolean,appendTo:{type:x(String),default:"body"},beforeClose:{type:x(Function)},destroyOnClose:Boolean,closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},modal:{type:Boolean,default:!0},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:0},top:{type:String},modelValue:Boolean,modalClass:String,width:{type:[String,Number]},zIndex:{type:Number},trapFocus:{type:Boolean,default:!1},headerAriaLevel:{type:String,default:"2"}}),W={open:()=>!0,opened:()=>!0,close:()=>!0,closed:()=>!0,[V]:e=>S(e),openAutoFocus:()=>!0,closeAutoFocus:()=>!0},X=(n,r)=>{var d;const i=s().emit,{nextZIndex:u}=q();let c="";const f=G(),p=G(),v=e(!1),y=e(!1),m=e(!1),b=e(null!=(d=n.zIndex)?d:u());let C,h;const g=N("namespace",D),k=o((()=>{const e={},o=`--${g.value}-dialog`;return n.fullscreen||(n.top&&(e[`${o}-margin-top`]=n.top),n.width&&(e[`${o}-width`]=E(n.width))),e})),B=o((()=>n.alignCenter?{display:"flex"}:{}));function A(){null==h||h(),null==C||C(),n.openDelay&&n.openDelay>0?({stop:C}=L((()=>x()),n.openDelay)):x()}function w(){null==C||C(),null==h||h(),n.closeDelay&&n.closeDelay>0?({stop:h}=L((()=>S()),n.closeDelay)):S()}function F(){n.beforeClose?n.beforeClose((function(e){e||(y.value=!0,v.value=!1)})):w()}function x(){I&&(v.value=!0)}function S(){v.value=!1}return n.lockScroll&&_(v),a((()=>n.modelValue),(e=>{e?(y.value=!1,A(),m.value=!0,b.value=U(n.zIndex)?u():b.value++,l((()=>{i("open"),r.value&&(r.value.scrollTop=0)}))):v.value&&w()})),a((()=>n.fullscreen),(e=>{r.value&&(e?(c=r.value.style.transform,r.value.style.transform=""):r.value.style.transform=c)})),t((()=>{n.modelValue&&(v.value=!0,m.value=!0,A())})),{afterEnter:function(){i("opened")},afterLeave:function(){i("closed"),i(V,!1),n.destroyOnClose&&(m.value=!1)},beforeLeave:function(){i("close")},handleClose:F,onModalClick:function(){n.closeOnClickModal&&F()},close:w,doClose:S,onOpenAutoFocus:function(){i("openAutoFocus")},onCloseAutoFocus:function(){i("closeAutoFocus")},onCloseRequested:function(){n.closeOnPressEscape&&F()},onFocusoutPrevented:function(e){var o;"pointer"===(null==(o=e.detail)?void 0:o.focusReason)&&e.preventDefault()},titleId:f,bodyId:p,closed:y,style:k,overlayDialogStyle:B,rendered:m,visible:v,zIndex:b}},Y=F({...Q,direction:{type:String,default:"rtl",values:["ltr","rtl","ttb","btt"]},size:{type:[String,Number],default:"30%"},withHeader:{type:Boolean,default:!0},modalFade:{type:Boolean,default:!0},headerAriaLevel:{type:String,default:"2"}}),ee=W,oe=["aria-label","aria-labelledby","aria-describedby"],ae=["id","aria-level"],le=["aria-label"],te=["id"],se=n({name:"ElDrawer",inheritAttrs:!1});const ne=O(z(n({...se,props:Y,emits:ee,setup(a,{expose:l}){const t=a,s=r();M({scope:"el-drawer",from:"the title slot",replacement:"the header slot",version:"3.0.0",ref:"https://element-plus.org/en-US/component/drawer.html#slots"},o((()=>!!s.title)));const n=e(),F=e(),x=R("drawer"),{t:S}=H(),{afterEnter:D,afterLeave:L,beforeLeave:I,visible:z,rendered:O,titleId:_,bodyId:T,zIndex:q,onModalClick:N,onOpenAutoFocus:V,onCloseAutoFocus:G,onFocusoutPrevented:U,onCloseRequested:J,handleClose:K}=X(t,n),Q=o((()=>"rtl"===t.direction||"ltr"===t.direction)),W=o((()=>E(t.size)));return l({handleClose:K,afterEnter:D,afterLeave:L}),(e,o)=>(d(),i(w,{to:"body",disabled:!e.appendToBody},[u(A,{name:p(x).b("fade"),onAfterEnter:p(D),onAfterLeave:p(L),onBeforeLeave:p(I),persisted:""},{default:c((()=>[f(u(p(P),{mask:e.modal,"overlay-class":e.modalClass,"z-index":p(q),onClick:p(N)},{default:c((()=>[u(p(Z),{loop:"",trapped:p(z),"focus-trap-el":n.value,"focus-start-el":F.value,onFocusAfterTrapped:p(V),onFocusAfterReleased:p(G),onFocusoutPrevented:p(U),onReleaseRequested:p(J)},{default:c((()=>[v("div",y({ref_key:"drawerRef",ref:n,"aria-modal":"true","aria-label":e.title||void 0,"aria-labelledby":e.title?void 0:p(_),"aria-describedby":p(T)},e.$attrs,{class:[p(x).b(),e.direction,p(z)&&"open"],style:p(Q)?"width: "+p(W):"height: "+p(W),role:"dialog",onClick:o[1]||(o[1]=m((()=>{}),["stop"]))}),[v("span",{ref_key:"focusStartRef",ref:F,class:b(p(x).e("sr-focus")),tabindex:"-1"},null,2),e.withHeader?(d(),C("header",{key:0,class:b(p(x).e("header"))},[e.$slots.title?h(e.$slots,"title",{key:1},(()=>[k(" DEPRECATED SLOT ")])):h(e.$slots,"header",{key:0,close:p(K),titleId:p(_),titleClass:p(x).e("title")},(()=>[e.$slots.title?k("v-if",!0):(d(),C("span",{key:0,id:p(_),role:"heading","aria-level":e.headerAriaLevel,class:b(p(x).e("title"))},g(e.title),11,ae))])),e.showClose?(d(),C("button",{key:2,"aria-label":p(S)("el.drawer.close"),class:b(p(x).e("close-btn")),type:"button",onClick:o[0]||(o[0]=(...e)=>p(K)&&p(K)(...e))},[u(p($),{class:b(p(x).e("close"))},{default:c((()=>[u(p(j))])),_:1},8,["class"])],10,le)):k("v-if",!0)],2)):k("v-if",!0),p(O)?(d(),C("div",{key:1,id:p(T),class:b(p(x).e("body"))},[h(e.$slots,"default")],10,te)):k("v-if",!0),e.$slots.footer?(d(),C("div",{key:2,class:b(p(x).e("footer"))},[h(e.$slots,"footer")],2)):k("v-if",!0)],16,oe)])),_:3},8,["trapped","focus-trap-el","focus-start-el","onFocusAfterTrapped","onFocusAfterReleased","onFocusoutPrevented","onReleaseRequested"])])),_:3},8,["mask","overlay-class","z-index","onClick"]),[[B,p(z)]])])),_:3},8,["name","onAfterEnter","onAfterLeave","onBeforeLeave"])],8,["disabled"]))}}),[["__file","drawer.vue"]]));export{ne as E,K as a,Q as b,W as c,J as d,X as u};
