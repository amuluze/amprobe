import"./base.CwKrOXiL.js";import{a as e,e as t,b as a,f as n,c as r,g as s,h as i,E as o,_ as u,d as l}from"./index.Cq_RCgrV.js";import{E as d}from"./el-card.w3-18o3J.js";import{s as c}from"./el-overlay.CI2e2OO9.js";import{E as h,a as f}from"./el-select.BLelAYUm.js";import"./el-popper.DMOJ8Ypx.js";import{d as m,r as p,b as v,j as y,a0 as g,w as b,e as $,D as _,m as x,v as w,F as S,o as M,u as D,a1 as O,Y as j,B as k,N as A,O as C,_ as L}from"./index.DR6loZJs.js";import"./index.PfrcTW0-.js";import"./index.BNy-OgOy.js";import"./use-form-item.KseOUpWN.js";import"./event.CWrEFZfq.js";import"./error.D_Dr4eZ1.js";import"./strings.Ck4ADK9s.js";import"./_Uint8Array.ClTZMasr.js";import"./scroll.B2RFdPg8.js";import"./castArray.BhBSoVDq.js";import"./focus-trap.GHIWC1jm.js";"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function F(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var T={exports:{}};const E=F(T.exports=function(){var e=1e3,t=6e4,a=36e5,n="millisecond",r="second",s="minute",i="hour",o="day",u="week",l="month",d="quarter",c="year",h="date",f="Invalid Date",m=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,p=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],a=e%100;return"["+e+(t[(a-20)%10]||t[a]||t[0])+"]"}},y=function(e,t,a){var n=String(e);return!n||n.length>=t?e:""+Array(t+1-n.length).join(a)+e},g={s:y,z:function(e){var t=-e.utcOffset(),a=Math.abs(t),n=Math.floor(a/60),r=a%60;return(t<=0?"+":"-")+y(n,2,"0")+":"+y(r,2,"0")},m:function e(t,a){if(t.date()<a.date())return-e(a,t);var n=12*(a.year()-t.year())+(a.month()-t.month()),r=t.clone().add(n,l),s=a-r<0,i=t.clone().add(n+(s?-1:1),l);return+(-(n+(a-r)/(s?r-i:i-r))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:l,y:c,w:u,d:o,D:h,h:i,m:s,s:r,ms:n,Q:d}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},b="en",$={};$[b]=v;var _="$isDayjsObject",x=function(e){return e instanceof D||!(!e||!e[_])},w=function e(t,a,n){var r;if(!t)return b;if("string"==typeof t){var s=t.toLowerCase();$[s]&&(r=s),a&&($[s]=a,r=s);var i=t.split("-");if(!r&&i.length>1)return e(i[0])}else{var o=t.name;$[o]=t,r=o}return!n&&r&&(b=r),r||!n&&b},S=function(e,t){if(x(e))return e.clone();var a="object"==typeof t?t:{};return a.date=e,a.args=arguments,new D(a)},M=g;M.l=w,M.i=x,M.w=function(e,t){return S(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var D=function(){function v(e){this.$L=w(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[_]=!0}var y=v.prototype;return y.parse=function(e){this.$d=function(e){var t=e.date,a=e.utc;if(null===t)return new Date(NaN);if(M.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var n=t.match(m);if(n){var r=n[2]-1||0,s=(n[7]||"0").substring(0,3);return a?new Date(Date.UTC(n[1],r,n[3]||1,n[4]||0,n[5]||0,n[6]||0,s)):new Date(n[1],r,n[3]||1,n[4]||0,n[5]||0,n[6]||0,s)}}return new Date(t)}(e),this.init()},y.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},y.$utils=function(){return M},y.isValid=function(){return!(this.$d.toString()===f)},y.isSame=function(e,t){var a=S(e);return this.startOf(t)<=a&&a<=this.endOf(t)},y.isAfter=function(e,t){return S(e)<this.startOf(t)},y.isBefore=function(e,t){return this.endOf(t)<S(e)},y.$g=function(e,t,a){return M.u(e)?this[t]:this.set(a,e)},y.unix=function(){return Math.floor(this.valueOf()/1e3)},y.valueOf=function(){return this.$d.getTime()},y.startOf=function(e,t){var a=this,n=!!M.u(t)||t,d=M.p(e),f=function(e,t){var r=M.w(a.$u?Date.UTC(a.$y,t,e):new Date(a.$y,t,e),a);return n?r:r.endOf(o)},m=function(e,t){return M.w(a.toDate()[e].apply(a.toDate("s"),(n?[0,0,0,0]:[23,59,59,999]).slice(t)),a)},p=this.$W,v=this.$M,y=this.$D,g="set"+(this.$u?"UTC":"");switch(d){case c:return n?f(1,0):f(31,11);case l:return n?f(1,v):f(0,v+1);case u:var b=this.$locale().weekStart||0,$=(p<b?p+7:p)-b;return f(n?y-$:y+(6-$),v);case o:case h:return m(g+"Hours",0);case i:return m(g+"Minutes",1);case s:return m(g+"Seconds",2);case r:return m(g+"Milliseconds",3);default:return this.clone()}},y.endOf=function(e){return this.startOf(e,!1)},y.$set=function(e,t){var a,u=M.p(e),d="set"+(this.$u?"UTC":""),f=(a={},a[o]=d+"Date",a[h]=d+"Date",a[l]=d+"Month",a[c]=d+"FullYear",a[i]=d+"Hours",a[s]=d+"Minutes",a[r]=d+"Seconds",a[n]=d+"Milliseconds",a)[u],m=u===o?this.$D+(t-this.$W):t;if(u===l||u===c){var p=this.clone().set(h,1);p.$d[f](m),p.init(),this.$d=p.set(h,Math.min(this.$D,p.daysInMonth())).$d}else f&&this.$d[f](m);return this.init(),this},y.set=function(e,t){return this.clone().$set(e,t)},y.get=function(e){return this[M.p(e)]()},y.add=function(n,d){var h,f=this;n=Number(n);var m=M.p(d),p=function(e){var t=S(f);return M.w(t.date(t.date()+Math.round(e*n)),f)};if(m===l)return this.set(l,this.$M+n);if(m===c)return this.set(c,this.$y+n);if(m===o)return p(1);if(m===u)return p(7);var v=(h={},h[s]=t,h[i]=a,h[r]=e,h)[m]||1,y=this.$d.getTime()+n*v;return M.w(y,this)},y.subtract=function(e,t){return this.add(-1*e,t)},y.format=function(e){var t=this,a=this.$locale();if(!this.isValid())return a.invalidDate||f;var n=e||"YYYY-MM-DDTHH:mm:ssZ",r=M.z(this),s=this.$H,i=this.$m,o=this.$M,u=a.weekdays,l=a.months,d=a.meridiem,c=function(e,a,r,s){return e&&(e[a]||e(t,n))||r[a].slice(0,s)},h=function(e){return M.s(s%12||12,e,"0")},m=d||function(e,t,a){var n=e<12?"AM":"PM";return a?n.toLowerCase():n};return n.replace(p,(function(e,n){return n||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return M.s(t.$y,4,"0");case"M":return o+1;case"MM":return M.s(o+1,2,"0");case"MMM":return c(a.monthsShort,o,l,3);case"MMMM":return c(l,o);case"D":return t.$D;case"DD":return M.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return c(a.weekdaysMin,t.$W,u,2);case"ddd":return c(a.weekdaysShort,t.$W,u,3);case"dddd":return u[t.$W];case"H":return String(s);case"HH":return M.s(s,2,"0");case"h":return h(1);case"hh":return h(2);case"a":return m(s,i,!0);case"A":return m(s,i,!1);case"m":return String(i);case"mm":return M.s(i,2,"0");case"s":return String(t.$s);case"ss":return M.s(t.$s,2,"0");case"SSS":return M.s(t.$ms,3,"0");case"Z":return r}return null}(e)||r.replace(":","")}))},y.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},y.diff=function(n,h,f){var m,p=this,v=M.p(h),y=S(n),g=(y.utcOffset()-this.utcOffset())*t,b=this-y,$=function(){return M.m(p,y)};switch(v){case c:m=$()/12;break;case l:m=$();break;case d:m=$()/3;break;case u:m=(b-g)/6048e5;break;case o:m=(b-g)/864e5;break;case i:m=b/a;break;case s:m=b/t;break;case r:m=b/e;break;default:m=b}return f?m:M.a(m)},y.daysInMonth=function(){return this.endOf(l).$D},y.$locale=function(){return $[this.$L]},y.locale=function(e,t){if(!e)return this.$L;var a=this.clone(),n=w(e,t,!0);return n&&(a.$L=n),a},y.clone=function(){return M.w(this.$d,this)},y.toDate=function(){return new Date(this.valueOf())},y.toJSON=function(){return this.isValid()?this.toISOString():null},y.toISOString=function(){return this.$d.toISOString()},y.toString=function(){return this.$d.toUTCString()},v}(),O=D.prototype;return S.prototype=O,[["$ms",n],["$s",r],["$m",s],["$H",i],["$W",o],["$M",l],["$y",c],["$D",h]].forEach((function(e){O[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),S.extend=function(e,t){return e.$i||(e(t,D,S),e.$i=!0),S},S.locale=w,S.isDayjs=x,S.unix=function(e){return S(1e3*e)},S.en=$[b],S.Ls=$,S.p={},S}()),Y={tooltip:{trigger:"axis",formatter:function(e){return(e=e[0]).value+"%"},axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:[{name:"CPU 使用率"}],left:"right"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:[0,0,0,0,0,0,0,0,0,0]},yAxis:[{type:"value",axisLabel:{show:!0,formatter:"{value} %"}}],series:[{name:"CPU 使用率",type:"line",smooth:!0,lineStyle:{width:2},data:[0,0,0,0,0,0,0,0,0,0]}]},W={tooltip:{trigger:"axis",formatter:function(e){return(e=e[0]).value+"%"},axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:["内存使用率"],left:"right"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:[0,0,0,0,0,0,0,0,0,0]},yAxis:[{type:"value",axisLabel:{show:!0,formatter:"{value} %"}}],series:[{name:"内存使用率",type:"line",smooth:!0,lineStyle:{width:2},data:[0,0,0,0,0,0,0,0,0,0]}]},H={tooltip:{trigger:"axis",formatter:function(e){let t="";return e.forEach((e=>{const a=["bps","Kbps","Mbps","Gbps"];let n=0;for(;e.value>=1024&&n<a.length-1;)e.value/=1024,n++;t+=e.seriesName+": "+e.value.toFixed(2)+" "+a[n]+"<br/>"})),t},axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:["Read","Write"],left:"right"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:[0,0,0,0,0,0,0,0,0,0]},yAxis:[{type:"value",axisLabel:{show:!0,formatter:function(e){const t=["bps","Kbps","Mbps","Gbps"];let a=0;for(;e>=1024&&a<t.length-1;)e/=1024,a++;return e.toFixed(2)+" "+t[a]}}}],series:[{name:"Read",type:"line",smooth:!0,lineStyle:{width:2},data:[0,0,0,0,0,0,0,0,0,0]},{name:"Write",type:"line",smooth:!0,lineStyle:{width:2},data:[0,0,0,0,0,0,0,0,0,0]}]},U={tooltip:{trigger:"axis",formatter:function(e){let t="";return e.forEach((e=>{const a=["bps","Kbps","Mbps","Gbps"];let n=0;for(;e.value>=1024&&n<a.length-1;)e.value/=1024,n++;t+=e.seriesName+": "+e.value.toFixed(2)+" "+a[n]+"<br/>"})),t},axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{data:["Receive","Send"],left:"right"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:[0,0,0,0,0,0,0,0,0,0]},yAxis:[{type:"value",axisLabel:{show:!0,formatter:function(e){const t=["bps","Kbps","Mbps","Gbps"];let a=0;for(;e>=1024&&a<t.length-1;)e/=1024,a++;return e.toFixed(2)+" "+t[a]}}}],series:[{name:"Receive",type:"line",smooth:!0,lineStyle:{width:2},data:[0,0,0,0,0,0,0,0,0,0]},{name:"Send",type:"line",smooth:!0,lineStyle:{width:2},data:[0,0,0,0,0,0,0,0,0,0]}]};function P(e){const t=["B","KB","MB","GB","TB"];let a=0;for(;e>=1024&&a<t.length-1;)e/=1024,a++;return`${e.toFixed(2)} ${t[a]}`}const R=e=>(A("data-v-938d1293"),e=e(),C(),e),z={class:"am-host-header"},G={class:"am-host-operator"},I=R((()=>_("span",null,"时间密度：",-1))),B={class:"am-host-content"},N=R((()=>_("div",{class:"am-host-container__image-title"},"CPU 总使用率",-1))),V={class:"am-host-container__image-description"},K=R((()=>_("div",{class:"am-host-container__image-title"},"内存使用率",-1))),J={class:"am-host-container__image-description"},Z=R((()=>_("div",{class:"am-host-container__image-title"},"磁盘使用率",-1))),q=R((()=>_("div",{class:"am-host-container__image-title"},"流量曲线图",-1))),Q=L(m({__name:"index",setup(m){const A=p(600),C=[{value:120,label:"2分钟"},{value:300,label:"5分钟"},{value:600,label:"10分钟"},{value:1800,label:"30分钟"},{value:3600,label:"1 小时"},{value:43200,label:"12小时"},{value:86400,label:"24小时"}],L=p("0.0%"),F=async()=>{const{data:t}=await e();L.value=t.percent.toFixed(2)+"%"},T=v(Y),R=async()=>{const e={start_time:E().unix()-A.value,end_time:E().unix()},{data:a}=await t(e),n=a.data;c(T,"xAxis.data",n.map((e=>E(1e3*e.timestamp).hour()+":"+E(1e3*e.timestamp).minute()))),c(T,"legend.data",["CPU使用率"]),c(T,"series",[{name:"CPU使用率",data:n.map((e=>e.value.toFixed(2))),type:"line",smooth:!0,showSymbol:!1}])},Q=p({percent:"0%",total:"0",used:"0"}),X=async()=>{const{data:e}=await a();Q.value.percent=e.percent.toFixed(2)+"%",Q.value.total=P(e.total),Q.value.used=P(e.used)},ee=v(W),te=async()=>{const e={start_time:E().unix()-A.value,end_time:E().unix()},{data:t}=await n(e),a=t.data;c(ee,"xAxis.data",a.map((e=>E(1e3*e.timestamp).hour()+":"+E(1e3*e.timestamp).minute()))),c(ee,"legend.data",["内存使用率"]),c(ee,"series",[{name:"内存使用率",data:a.map((e=>e.value.toFixed(2))),type:"line",smooth:!0,showSymbol:!1}])},ae=p([]),ne=async()=>{const{data:e}=await r();ae.value=[],e.info.map((e=>{ae.value.push({device:e.device,total:P(e.total),used:P(e.used),percent:e.percent.toFixed(2)+"%"})}))},re=v(H),se=async()=>{const e={start_time:E().unix()-A.value,end_time:E().unix()},{data:t}=await s(e),a=t;c(re,"xAxis.data",a.usage[0].data.map((e=>E(1e3*e.timestamp).hour()+":"+E(1e3*e.timestamp).minute()))),c(re,"legend.data",(e=>{let t=[];return["Read","Write"].forEach((a=>{e.forEach((e=>{t.push(e.device+"_"+a)}))})),t})(a.usage)),c(re,"series",(e=>{let t=[];return["Read","Write"].forEach((a=>{e.forEach((e=>{"Read"===a?t.push({name:e.device+"_"+a,data:e.data.map((e=>e.io_read)),type:"line",smooth:!0,showSymbol:!0,symbolSize:2,hoverAnimation:!0}):t.push({name:e.device+"_"+a,data:e.data.map((e=>e.io_write)),type:"line",smooth:!0,showSymbol:!0,symbolSize:2,hoverAnimation:!0})}))})),t})(a.usage))},ie=p([]),oe=v(U),ue=async()=>{const e={start_time:E().unix()-A.value,end_time:E().unix()},{data:t}=await i(e),a=t;ie.value=[],a.usage.map((e=>{ie.value.push({ethernet:e.ethernet,read:P(e.data[e.data.length-1].bytes_recv),write:P(e.data[e.data.length-1].bytes_sent)})})),c(oe,"xAxis.data",a.usage[0].data.map((e=>E(1e3*e.timestamp).hour()+":"+E(1e3*e.timestamp).minute()))),c(oe,"legend.data",(e=>{let t=[];return["Receive","Send"].forEach((a=>{e.forEach((e=>{t.push(e.ethernet+"_"+a)}))})),t})(a.usage)),c(oe,"series",(e=>{let t=[];return["Receive","Send"].forEach((a=>{e.forEach((e=>{"Receive"===a?t.push({name:e.ethernet+"_"+a,data:e.data.map((e=>e.bytes_recv)),type:"line",showSymbol:!0,symbolSize:2,hoverAnimation:!0,smooth:!0}):t.push({name:e.ethernet+"_"+a,data:e.data.map((e=>e.bytes_sent)),type:"line",showSymbol:!0,symbolSize:2,hoverAnimation:!0,smooth:!0})}))})),t})(a.usage))},le=p();return y((()=>{F(),R(),X(),te(),ne(),se(),ue(),le.value=setInterval((()=>{F(),R(),X(),te(),ne(),se(),ue()}),5e3)})),g((()=>{clearInterval(le.value)})),b((()=>A.value),(()=>{F(),R(),X(),te(),ne(),se(),ue()})),(e,t)=>{const a=f,n=h,r=d,s=u,i=l,c=o;return M(),$(S,null,[_("div",z,[_("span",{onClick:t[0]||(t[0]=t=>e.$router.push("/host/monitor"))},"监控"),_("span",{onClick:t[1]||(t[1]=t=>e.$router.push("/host/file"))},"文件"),_("span",{onClick:t[2]||(t[2]=t=>e.$router.push("/host/terminal"))},"终端")]),_("div",G,[x(r,{shadow:"never"},{default:w((()=>[I,x(n,{modelValue:D(A),"onUpdate:modelValue":t[3]||(t[3]=e=>O(A)?A.value=e:null),placeholder:"Select",size:"default",style:{width:"240px"}},{default:w((()=>[(M(),$(S,null,j(C,(e=>x(a,{key:e.value,label:e.label,value:e.value},null,8,["label","value"]))),64))])),_:1},8,["modelValue"])])),_:1})]),_("div",B,[x(c,{gutter:4},{default:w((()=>[x(i,{span:12},{default:w((()=>[x(r,{shadow:"never"},{default:w((()=>[x(s,{option:D(T)},{default:w((()=>[N,_("div",V,"百分比： "+k(D(L)),1)])),_:1},8,["option"])])),_:1})])),_:1}),x(i,{span:12},{default:w((()=>[x(r,{shadow:"never"},{default:w((()=>[x(s,{option:D(ee)},{default:w((()=>[K,_("div",J," 总量："+k(D(Q).total)+" 使用："+k(D(Q).used)+" 百分比： "+k(D(Q).percent),1)])),_:1},8,["option"])])),_:1})])),_:1})])),_:1}),x(c,{gutter:4},{default:w((()=>[x(i,{span:12},{default:w((()=>[x(r,{shadow:"never"},{default:w((()=>[x(s,{option:D(re)},{default:w((()=>[Z,(M(!0),$(S,null,j(D(ae),((e,t)=>(M(),$("div",{key:t,class:"am-host-container__image-description"},k(e.device)+" 总量："+k(e.total)+" 使用："+k(e.used)+" 百分比： "+k(e.percent),1)))),128))])),_:1},8,["option"])])),_:1})])),_:1}),x(i,{span:12},{default:w((()=>[x(r,{shadow:"never"},{default:w((()=>[x(s,{option:D(oe)},{default:w((()=>[q,(M(!0),$(S,null,j(D(ie),((e,t)=>(M(),$("div",{key:t,class:"am-host-container__image-description"},k(e.ethernet)+" 接收："+k(e.read)+" 发送："+k(e.write),1)))),128))])),_:1},8,["option"])])),_:1})])),_:1})])),_:1})])],64)}}}),[["__scopeId","data-v-938d1293"]]);export{Q as default};
